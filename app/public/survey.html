<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Feline Survey</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
</head>

<body>
    <div class="container">
        <!-- jumbotron -->
        <div class="jumbotron">
            <h1 class="text-center">Feline Friend Finder</h1>
            <hr>
            <br>
            <div class="text-center">
                <a href="/api/friendsList">
                    <button type="button" class="btn btn-lg btn-primary"><span class="glyphicon glyphicon-list-alt"></span> View Friends</button>
                </a>
                <a href="/">
                    <button type="button" class="btn btn-lg btn-default"><span class="glyphicon glyphicon-home"></span></button>
                </a>
            </div>
        </div>
        <div class="row">
            <!-- survey box -->
            <div class="col-lg-12">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">Friend Survey</h4>
                    </div>
                    <div class="panel-body">
                        <form role="form">
                            <div class="form-group">
                                <label for="">Name (required)</label>
                                <input type="text" class="form-control" id="friend_name">
                            </div>
                            <div class="form-group">
                                <label for="">Photo Image URL</label>
                                <input type="text" class="form-control" id="friend_photo">
                            </div>
                            <h4>On a scale of 1-5, would you : </h4>
                            <div class="form-group">
                                <label for="">You love playing with a ball of yarn</label>
                                <select id="q0" class="form-control" style="width: 25%">
                                    <option>1 (Strongly Disagree)</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5 (Strongly Agree)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="">You love sitting on keyboards</label>
                                <select id="q1" class="form-control" style="width: 25%">
                                    <option>1 (Strongly Disagree)</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5 (Strongly Agree)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="">You enjoy the company of dogs</label>
                                <select id="q2" class="form-control" style="width: 25%">
                                    <option>1 (Strongly Disagree)</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5 (Strongly Agree)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="">You could eat lasagna for every meal</label>
                                <select id="q3" class="form-control" style="width: 25%">
                                    <option>1 (Strongly Disagree)</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5 (Strongly Agree)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="">Catnip is the most important thing in your life</label>
                                <select id="q4" class="form-control" style="width: 25%">
                                    <option>1 (Strongly Disagree)</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5 (Strongly Agree)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="">The words 'Fancy Feast' make you drop everything you are doing</label>
                                <select id="q5" class="form-control" style="width: 25%">
                                    <option>1 (Strongly Disagree)</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5 (Strongly Agree)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="">Laser pointers are incredible</label>
                                <select id="q6" class="form-control" style="width: 25%">
                                    <option>1 (Strongly Disagree)</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5 (Strongly Agree)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="">Knocking over objects is your favorite passtime</label>
                                <select id="q7" class="form-control" style="width: 25%">
                                    <option>1 (Strongly Disagree)</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5 (Strongly Agree)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="">4AM is the perfect time to start purring nonstop</label>
                                <select id="q8" class="form-control" style="width: 25%">
                                    <option>1 (Strongly Disagree)</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5 (Strongly Agree)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="">A litter box is far superior to a toilet</label>
                                <select id="q9" class="form-control" style="width: 25%">
                                    <option>1 (Strongly Disagree)</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5 (Strongly Agree)</option>
                                </select>
                            </div>
                        </form>
                        <button class="btn btn-primary submitBtn">Submit</button>
                    </div>
                </div>
                <!-- popup box div -->
                <div class="popupBox" style="position: absolute;display: none; margin-top: -70%; margin-left: 15%; background-color: white; padding: 100px; border: 5px solid black; border-radius: 25px;">
                    <h1 class="popupText"></h1>
                    <span class="popupImage"></span>
                </div>
            </div>
        </div>
        <!-- footer -->
        <footer class="footer">
            <div class="container">
                <p><a href="/api/friendsList">API Friends Link</a> | <a href="https://github.com/suhailpurewal/friendfinder">GitHub Repo</a></p>
            </div>
        </footer>
    </div>
</body>

</html>

<script type="text/javascript">
// function for popupbox and to make it disappear
function displayPopup(htmldata,urldata) {
    $(".popupText").text(htmldata);
    $('.popupImage').html(urldata);
    $(".popupBox").show(800, function() {
        timeoutID = window.setTimeout(hideDiv, 8000);
        function hideDiv() {
            $(".popupBox").hide(800);
        };
    });
};
// submit button grabs name/photo
$(".submitBtn").on("click", function() {
    var newFriend = {
        name: $('#friend_name').val().trim(),
        photo: $('#friend_photo').val().trim(),
        scores: []
    };
    // for loop to run through chosen answer values
    for (i = 0; i < 10; i++) {
        var newVal = $('#q' + i).val();
        newFriend.scores.push(parseInt(newVal));
    }
    console.log(newFriend);

    var currentURL = window.location.origin;
    $.post(currentURL + "/api/friendsList", newFriend,
        function(data) {
            console.log(data.name);
            var sendFriend = "Your Best match is " + data.name;
            var sendImage = '<img src = "'+ data.photo + '">';
            displayPopup(sendFriend,sendImage);

            $('#friend_name').val("");
            $('#friend_photo').val("");
        });
    event.preventDefault();
});
</script>